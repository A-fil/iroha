dependencies:
  override:
    - mkdir build; cd build; cmake ..; make
checkout:
  post:
    - cd /tmp
    - sudo apt-get -y purge cmake
    - sudo apt-get install build-essential
    - wget http://www.cmake.org/files/v3.5/cmake-3.5.2.tar.gz
    - tar xf cmake-3.5.2.tar.gz
    - cd cmake-3.5.2
    - ./configure
    - make
    - sudo make install 
    - cd ~/iroha
    - git submodule init 
    - git submodule sync
    - git submodule update
    - cd core/vendor/Aeron; ./gradlew; mkdir -p cppbuild/Debug; cd cppbuild/Debug; cmake ../..; cmake --build . --clean-first; ctest
    - cd core/vendor/ed25519; make
    - cd core/vendor/msgpack-c; cmake -DMSGPACK_CXX11=ON .; sudo make install
test:
  override:
    - ./test.sh

